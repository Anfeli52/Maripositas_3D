<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/CSS/navbar.css}">
    <link rel="stylesheet" th:href="@{/CSS/registroMariposa.css}">
    <title>Registro de Especie de Mariposa</title>
</head>

<body>

    <nav th:replace="~{Admin/fragment_admin :: adminNavbar}"></nav>
    <section class="container">
        <h1>Registro de Nueva Especie de Mariposa</h1>

        <form th:action="@{/admin/nueva-especie}" method="post" class="main-form" th:object="${especieMariposaForm}">

            <h2>1. Identificación y Descripción de la Especie</h2>

            <fieldset>
                <legend>Información General</legend>

                <label for="nombreCientifico">Nombre Científico (*):</label>
                <input type="text" id="nombreCientifico" th:field="*{nombreCientifico}" required>

                <label for="nombreComun">Nombre Común:</label>
                <input type="text" id="nombreComun" th:field="*{nombreComun}">

                <label for="familia">Familia (*):</label>
                <input type="text" id="familia" th:field="*{familia}" required>

                <label for="tipoEspecie">Tipo de Especie (*):</label>
                <select id="tipoEspecie" th:field="*{tipoEspecie}" required>
                    <option value="">-- Seleccione el tipo --</option>
                    <option value="diurna">Diurna</option>
                    <option value="nocturna">Nocturna</option>
                    <option value="crepuscular">Crepuscular</option>
                </select>

                <label for="descripcion">Descripción:</label>
                <textarea id="descripcion" th:field="*{descripcion}" rows="4"></textarea>
            </fieldset>

            <h3>Características Morfológicas (Opcional)</h3>
            <fieldset>
                <label for="color">Color Principal:</label>
                <input type="text" id="color" th:field="*{caracteristicasMorfo.color}">

                <label for="tamanoAlas">Tamaño de Alas (Ej: 10-15 cm):</label>
                <input type="text" id="tamanoAlas" th:field="*{caracteristicasMorfo.tamanoAlas}">

                <label for="formaAntenas">Forma de Antenas:</label>
                <input type="text" id="formaAntenas" th:field="*{caracteristicasMorfo.formaAntenas}">
            </fieldset>

            <h2>2. Archivos Multimedia (URLs)</h2>

            <h3>Imágenes Generales (Array de URLs - Requerido)</h3>
            <fieldset>
                <label for="imagen1">Imagen Principal (URL) (*):</label>
                <input type="url" id="imagen1" th:field="*{imagenes[0]}" required>
                <label for="imagen2">Imagen Secundaria (URL):</label>
                <input type="url" id="imagen2" th:field="*{imagenes[1]}">
                <label for="imagen3">Imagen Adicional (URL):</label>
                <input type="url" id="imagen3" th:field="*{imagenes[2]}">
            </fieldset>

            <h3>Imágenes Detalladas (Opcional)</h3>
            <fieldset>
                <label for="alaIzquierda">URL Ala Izquierda:</label>
                <input type="url" id="alaIzquierda" th:field="*{imagenesDetalladas.alaIzquierda}">

                <label for="alaDerecha">URL Ala Derecha:</label>
                <input type="url" id="alaDerecha" th:field="*{imagenesDetalladas.alaDerecho}">

                <label for="antenas">URL Antenas:</label>
                <input type="url" id="antenas" th:field="*{imagenesDetalladas.antenas}">

                <label for="cuerpo">URL Cuerpo:</label>
                <input type="url" id="cuerpo" th:field="*{imagenesDetalladas.cuerpo}">

                <label for="patas">URL Patas:</label>
                <input type="url" id="patas" th:field="*{imagenesDetalladas.patas}">

                <label for="cabeza">URL Cabeza:</label>
                <input type="url" id="cabeza" th:field="*{imagenesDetalladas.cabeza}">

            </fieldset>

            <h2>3. Ubicación de Recolección</h2>

            <fieldset>
                <legend>Opción 1: Seleccionar Ubicación Existente</legend>
                <label for="ubicacionRecoleccionId">Ubicación Existente:</label>
                <select id="ubicacionRecoleccionId" th:field="*{ubicacionRecoleccionId}">
                    <option value="">-- Seleccione una Ubicación Existente --</option>
                    <option th:each="ubicacion : ${ubicacionesDisponibles}" th:value="${ubicacion.id}"
                            th:text="${ubicacion.localidad + ' (' + ubicacion.municipio + ', ' + ubicacion.departamento + ')'}">
                    </option>
                </select>
            </fieldset>

            <fieldset>
                <legend>Opción 2: O Ingresar Nueva Ubicación Manualmente</legend>

                <input type="checkbox" id="guardarNuevaUbicacion" th:field="*{guardarNuevaUbicacion}" value="true">
                <label for="guardarNuevaUbicacion">Quiero registrar una NUEVA Ubicación</label>

                <hr>

                <label for="pais">País (*):</label>
                <input type="text" id="pais" th:field="*{nuevaUbicacion.pais}">

                <label for="departamento">Departamento (*):</label>
                <input type="text" id="departamento" th:field="*{nuevaUbicacion.departamento}">

                <label for="municipio">Municipio (*):</label>
                <input type="text" id="municipio" th:field="*{nuevaUbicacion.municipio}">

                <label for="localidad">Localidad / Sitio Específico (*):</label>
                <input type="text" id="localidad" th:field="*{nuevaUbicacion.localidad}">

                <label for="ecosistema">Ecosistema:</label>
                <input type="text" id="ecosistema" th:field="*{nuevaUbicacion.ecosistema}">

                <label for="latitud">Latitud (*):</label>
                <input type="number" step="any" id="latitud" th:field="*{nuevaUbicacion.geolocalizacion.latitud}">

                <label for="longitud">Longitud (*):</label>
                <input type="number" step="any" id="longitud" th:field="*{nuevaUbicacion.geolocalizacion.longitud}">
            </fieldset>

            <div class="form-actions">
                <button type="submit">Registrar Especie Completa</button>
            </div>
        </form>
    </section>

</body>

</html>